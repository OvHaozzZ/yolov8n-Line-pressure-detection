# 行稳致远 - 基于国产大算力芯片的危险驾驶行为检测系统

## 1. 项目概述

本项目是一个基于计算机视觉的车辆压线检测系统，主要用于检测车辆是否压线行驶。系统采用YOLOv8目标检测模型进行车辆检测，结合车道线检测和压线判断算法，实现了对图片和视频中车辆压线行为的自动检测。

## 2. 系统架构

### 2.1 整体架构
系统采用模块化设计，主要包含以下几个核心模块：
- 用户界面模块 (interaction.py)
- 数据处理模块 (process.py)
- 车辆检测模块 (car_position_detector.py)
- 车道线检测模块 (lane_line_detector.py)
- 压线判断模块 (line_cross_judger.py)

### 2.2 技术栈
- 编程语言：Python 3.x
- 深度学习框架：PyTorch
- 目标检测：YOLOv8
- 图像处理：OpenCV
- 用户界面：Tkinter
- 数学计算：NumPy

## 3. 核心功能模块

### 3.1 用户界面模块 (interaction.py)
- 基于Tkinter的现代化GUI界面
- 支持图片、视频和实时监控三种模式
- 美观的界面设计和交互体验
- 日志记录功能

### 3.2 数据处理模块 (process.py)
- 统一的数据处理入口
- 支持图片、视频和文件夹批处理
- 结果可视化和保存
- 性能评估（精确率和召回率）

### 3.3 车辆检测模块 (car_position_detector.py)
- 基于YOLOv8的车辆检测
- 透视变换处理
- 车辆位置坐标转换
- 检测结果可视化

### 3.4 车道线检测模块 (lane_line_detector.py)
- 图像预处理（灰度化、高斯模糊）
- Canny边缘检测
- Hough变换直线检测
- 车道线拟合和参数计算

### 3.5 压线判断模块 (line_cross_judger.py)
- 点到直线距离计算
- 车辆位置与车道线关系判断
- 压线阈值设置
- 多车辆并行判断

## 4. 依赖项

系统依赖的主要Python包：
```
ultralytics==8.0.20
opencv-python==4.8.0
numpy==1.24.3
Pillow==10.0.0
torch==2.0.1
torchvision==0.15.2
tqdm==4.65.0
scikit-learn==1.3.0
pathlib==1.0.1
typings-extensions==4.7.1
```

## 5. 使用说明

### 5.1 环境配置
1. 安装Python 3.x
2. 安装依赖包：`pip install -r requirements.txt`
3. 下载YOLOv8模型文件：`yolov8n.pt`

### 5.2 运行方式
1. 图片检测：
   - 点击"图片智能检测"按钮
   - 选择待检测图片
   - 查看检测结果

2. 视频分析：
   - 点击"视频行为分析"按钮
   - 选择待分析视频
   - 实时查看分析结果

3. 实时监控：
   - 点击"实时安全监测"按钮
   - 连接专用硬件设备
   - 开始实时监控

## 6. 性能指标

- 检测精度：基于YOLOv8的车辆检测
- 处理速度：支持实时视频处理
- 准确率：支持精确率和召回率评估
- 可视化：实时显示检测结果

## 7. 注意事项

1. 确保有足够的GPU内存运行YOLOv8模型
2. 视频处理时注意帧率设置
3. 车道线检测效果受光照条件影响
4. 建议在清晰的道路场景下使用

## 8. 未来优化方向

1. 优化车道线检测算法
2. 增加更多危险驾驶行为检测
3. 提升实时处理性能
4. 优化用户界面交互
5. 增加数据导出和分析功能

## 9. 系统缺陷分析

### 9.1 技术层面缺陷
1. 车道线检测
   - 在复杂光照条件下（如夜间、雨天）检测效果不佳
   - 对弯曲车道线的检测精度较低
   - 容易受到路面标记、阴影等干扰

2. 车辆检测
   - YOLOv8模型对小型车辆检测精度不足
   - 在车辆密集场景下可能出现漏检
   - 模型推理速度受限于硬件性能

3. 压线判断
   - 阈值设置固定，无法适应不同场景
   - 对车辆部分压线的情况判断不够准确
   - 缺乏对车辆行驶轨迹的连续性分析

### 9.2 功能层面缺陷
1. 实时监控
   - 实时监控功能尚未完全实现
   - 缺乏硬件设备的兼容性测试
   - 缺少异常情况的处理机制

2. 数据处理
   - 视频处理时内存占用较大
   - 批量处理时缺乏进度显示
   - 结果保存格式单一

3. 用户界面
   - 界面布局固定，不支持自定义
   - 缺少参数调整界面
   - 日志查看功能不完善

### 9.3 性能层面缺陷
1. 计算性能
   - GPU内存占用较高
   - CPU利用率优化不足
   - 多线程处理机制不完善

2. 响应速度
   - 大尺寸图片处理速度慢
   - 高分辨率视频处理延迟明显
   - 界面响应存在卡顿

3. 资源消耗
   - 模型文件体积较大
   - 临时文件清理不及时
   - 内存泄漏风险

## 10. 项目总结

### 10.1 技术成果
1. 实现了基于YOLOv8的车辆检测系统
2. 开发了完整的车道线检测和压线判断算法
3. 构建了现代化的图形用户界面
4. 建立了完整的日志记录和错误处理机制

### 10.2 创新点
1. 采用透视变换处理车辆位置
2. 实现了多车辆并行检测和判断
3. 开发了实时视频处理功能
4. 设计了美观易用的用户界面

### 10.3 经验教训
1. 开发经验
   - 模块化设计提高了代码可维护性
   - 完善的错误处理机制保证了系统稳定性
   - 日志记录对问题定位和调试帮助很大

2. 技术积累
   - 深入理解了计算机视觉算法
   - 掌握了深度学习模型的应用
   - 提升了Python工程化开发能力

3. 项目管理
   - 需求分析要更加细致
   - 测试环节需要加强
   - 文档编写要及时跟进

### 10.4 未来展望
1. 技术升级
   - 引入更先进的深度学习模型
   - 优化算法性能
   - 提升系统稳定性

2. 功能扩展
   - 增加更多危险驾驶行为检测
   - 开发移动端应用
   - 实现云端部署

3. 应用推广
   - 完善产品文档
   - 建立用户社区
   - 开展市场推广 